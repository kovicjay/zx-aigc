# 配置文件使用说明

## 概述

造序AI跑图小工具支持通过配置文件 `config.env` 来设置环境变量和默认参数，无需修改代码即可调整程序行为。

## 配置文件位置

配置文件位于程序根目录：`config.env`

## 配置项说明

### 调试模式设置
```bash
# 调试模式设置
# 设置为 1 启用调试模式（跳过TOKEN验证，显示TOKEN管理功能）
# 设置为 0 或其他值启用生产模式（需要TOKEN验证）
DEBUG=0
```

**说明：**
- `DEBUG=1`：启用调试模式，跳过TOKEN验证，显示TOKEN管理功能
- `DEBUG=0`：启用生产模式，需要TOKEN验证

### ComfyUI服务器设置
```bash
# 默认ComfyUI地址（可在界面中修改）
COMFYUI_URL=http://nps.izeta.com.cn:5005
```

**说明：**
- 设置默认的ComfyUI服务器地址
- 程序启动时会在界面中显示此地址
- 用户仍可在界面中修改

### 默认项目目录
```bash
# 默认项目目录（可在界面中修改）
DEFAULT_PROJECT_DIR=D:\zx\cursor\jingqiu\tu\
```

**说明：**
- 设置默认的项目根目录
- 程序启动时会在界面中显示此目录
- 用户仍可在界面中修改

### 默认休眠时间
```bash
# 默认休眠时间（秒）
DEFAULT_SLEEP_TIME=30
```

**说明：**
- 设置当没有待处理图片时的休眠时间
- 单位：秒
- 用户仍可在界面中修改

### 请求超时设置
```bash
# 请求超时设置（秒）
REQUEST_TIMEOUT=60
```

**说明：**
- 设置向ComfyUI服务器发送请求的超时时间
- 单位：秒
- 建议根据网络情况调整

### 工作流超时设置
```bash
# 工作流超时设置（秒）
WORKFLOW_TIMEOUT=900
```

**说明：**
- 设置等待工作流完成的最大时间
- 单位：秒
- 建议根据工作流复杂度调整

## 使用方法

### 1. 修改配置文件
使用文本编辑器打开 `config.env` 文件，修改相应的配置项。

### 2. 重启程序
修改配置文件后，需要重启程序才能生效。

### 3. 验证配置
程序启动时会在控制台显示"配置文件加载完成"，表示配置加载成功。

## 配置示例

### 开发调试配置
```bash
# 开发调试配置
DEBUG=1
COMFYUI_URL=http://localhost:8188
DEFAULT_PROJECT_DIR=C:\Users\YourName\Projects\AI\Images\
DEFAULT_SLEEP_TIME=10
REQUEST_TIMEOUT=30
WORKFLOW_TIMEOUT=600
```

### 生产环境配置
```bash
# 生产环境配置
DEBUG=0
COMFYUI_URL=http://nps.izeta.com.cn:5005
DEFAULT_PROJECT_DIR=D:\zx\cursor\jingqiu\tu\
DEFAULT_SLEEP_TIME=30
REQUEST_TIMEOUT=60
WORKFLOW_TIMEOUT=900
```

## 注意事项

1. **配置文件格式**：
   - 使用 `KEY=VALUE` 格式
   - 支持注释行（以 `#` 开头）
   - 支持空行
   - 值可以包含引号，程序会自动去除

2. **路径设置**：
   - Windows路径使用反斜杠 `\` 或正斜杠 `/`
   - 建议使用正斜杠 `/` 避免转义问题

3. **数值设置**：
   - 时间相关配置使用整数（秒）
   - 程序会自动验证数值格式

4. **重启要求**：
   - 修改配置文件后必须重启程序
   - 程序启动时才会加载配置

## 故障排除

### 配置文件不存在
如果 `config.env` 文件不存在，程序会使用默认设置，并在控制台显示相应提示。

### 配置加载失败
如果配置文件格式错误，程序会在控制台显示错误信息，并使用默认设置。

### 配置不生效
确保：
1. 配置文件格式正确
2. 已重启程序
3. 检查控制台是否有错误信息

## 技术支持

如有配置问题，请检查：
1. 配置文件语法是否正确
2. 程序控制台输出信息
3. 相关日志文件
